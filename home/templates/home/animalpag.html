{% load static %}
<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ animal.nome }}</title>
    <link rel="stylesheet" href="{% static 'home/css/animalpag.css' %}">
    <link href="https://fonts.googleapis.com/css2?family=Comfortaa&display=swap" rel="stylesheet">
</head>
<body>

<!-- Adicionando a navbar da página principal -->
<div class="navbar" id="navbar">
    <div class="title_span">
        <span class="sos">SOS</span><br>
        <span class="patas">4PATAS</span>
    </div>
    <nav class="nav-menu">
        <a href="{% url 'home:index' %}">Home</a>
        <a href="#">Contato</a>
        <a href="#">Doar</a>
        <a href="#" class="btn-doacao">QUERO ADOTAR</a>
    </nav>
</div>

<div class="container">
    <!-- Coluna da esquerda -->
    <div class="image-section">
        <h1 class="gallery-title">GALERIA</h1>
        <div class="image-container">
            <div class="main-image-wrapper">
                <img id="mainImage" class="main-img" src="{{ animal.foto.url }}" alt="Foto da Capa de um Cachorro">
                <button class="arrow-btn prev-btn">&larr;</button>
                <button class="arrow-btn next-btn">&rarr;</button>
            </div>
            <div class="gallery">
                {% for img in animal.images.all %}
                    <img class="thumbnail" src="{{ img.image.url }}" alt="Foto do animal">
                {% empty %}
                    <p>Não há imagens na galeria ainda.</p>
                {% endfor %}
            </div>
        </div>
    </div>

    <!-- Coluna da direita -->
    <div class="details-section">
        <h1>{{ animal.nome }}</h1>
        <p class="info-item"><strong>Idade:</strong> {{ animal.idade }}</p>
        <p class="info-item"><strong>Porte:</strong> {{ animal.porte }}</p>
        <p class="info-item"><strong>Espécie:</strong> {{ animal.especie }}</p>
        <p class="description"><strong>Descrição:</strong> {{ animal.descricao }}</p>

        <a href="#" class="button">Quero adotar</a>
    </div>
</div>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const mainImage = document.getElementById("mainImage");
        const thumbnails = document.querySelectorAll(".thumbnail");
        const prevBtn = document.querySelector(".prev-btn");
        const nextBtn = document.querySelector(".next-btn");
        
        // Função para trocar a imagem principal com uma miniatura específica
        function swapWithThumbnail(thumbnailIndex) {
            if (thumbnailIndex >= 0 && thumbnailIndex < thumbnails.length) {
                const tempSrc = mainImage.src;
                mainImage.src = thumbnails[thumbnailIndex].src;
                thumbnails[thumbnailIndex].src = tempSrc;
            }
        }
        
        // Evento para botão anterior
        prevBtn.addEventListener("click", function() {
            // Se não houver miniaturas, não faz nada
            if (thumbnails.length === 0) return;
            
            // Troca com a última miniatura
            swapWithThumbnail(thumbnails.length - 1);
            
            // Reorganiza as miniaturas (move a última para a primeira posição)
            const lastThumbnailSrc = thumbnails[thumbnails.length - 1].src;
            for (let i = thumbnails.length - 1; i > 0; i--) {
                thumbnails[i].src = thumbnails[i - 1].src;
            }
            thumbnails[0].src = lastThumbnailSrc;
        });
        
        // Evento para botão próximo
        nextBtn.addEventListener("click", function() {
            // Se não houver miniaturas, não faz nada
            if (thumbnails.length === 0) return;
            
            // Troca com a primeira miniatura
            swapWithThumbnail(0);
            
            // Reorganiza as miniaturas (move a primeira para a última posição)
            const firstThumbnailSrc = thumbnails[0].src;
            for (let i = 0; i < thumbnails.length - 1; i++) {
                thumbnails[i].src = thumbnails[i + 1].src;
            }
            thumbnails[thumbnails.length - 1].src = firstThumbnailSrc;
        });
        
        // Evento para miniaturas (mantendo o comportamento original)
        thumbnails.forEach(function (thumb) {
            thumb.addEventListener("click", function () {
                const tempSrc = mainImage.src;
                mainImage.src = this.src;
                this.src = tempSrc;
            });
        });
        
        // Adicionar comportamento de scroll para a navbar
        window.addEventListener("scroll", function() {
            const navbar = document.getElementById("navbar");
            if (window.scrollY > 50) {
                navbar.classList.add("scrolled");
            } else {
                navbar.classList.remove("scrolled");
            }
        });
    });
</script>

</body>
</html>